/* Reusable components: buttons, cards, forms, badges, toasts, segmented controls, toggles */

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  font-weight: 500;
  border: none;
  border-radius: var(--radius-md);
  transition: background var(--dur-1) var(--ease), box-shadow var(--dur-1) var(--ease);
}

.btn:focus-visible {
  box-shadow: var(--focus);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-primary {
  background: var(--accent);
  color: #fff;
}

.btn-primary:hover:not(:disabled) {
  background: #8b6cff;
}

.btn-secondary {
  background: var(--card-2);
  color: var(--text);
  border: 1px solid var(--border);
}

.btn-secondary:hover:not(:disabled) {
  background: var(--card);
}

.btn-danger {
  background: var(--danger);
  color: #fff;
}

.btn-danger:hover:not(:disabled) {
  background: #dc2626;
}

.btn-sm {
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-sm);
}

.btn-lg {
  padding: var(--space-3) var(--space-5);
  font-size: var(--text-lg);
}

/* Cards */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  box-shadow: var(--shadow-sm);
}

.card-2 {
  background: var(--card-2);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
}

/* Form inputs */
.input,
.textarea,
.select {
  width: 100%;
  padding: var(--space-2) var(--space-3);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text);
  transition: border-color var(--dur-1) var(--ease);
}

.input::placeholder,
.textarea::placeholder {
  color: var(--subtle);
}

.input:hover:not(:disabled),
.textarea:hover:not(:disabled) {
  border-color: rgba(255,255,255,0.2);
}

/* Date/time/datetime inputs: always light background so the field and native picker are readable in dark or light theme */
.input[type="date"],
.input[type="time"],
.input[type="datetime-local"],
.input.flatpickr-date,
.input.flatpickr-datetime {
  background: #fff;
  color: #1a1a1a;
  border-color: #ccc;
  color-scheme: light;
}
.input[type="date"]:hover:not(:disabled),
.input[type="time"]:hover:not(:disabled),
.input[type="datetime-local"]:hover:not(:disabled),
.input.flatpickr-date:hover,
.input.flatpickr-datetime:hover {
  border-color: #999;
}

.textarea {
  min-height: 100px;
  resize: vertical;
}

.select {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--space-3) center;
  padding-right: 2rem;
}

.checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
}

.checkbox-label {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  cursor: pointer;
  font-weight: normal;
  margin-bottom: 0;
}

.checkbox-label input {
  width: 1.125rem;
  height: 1.125rem;
  accent-color: var(--accent);
}

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  font-weight: 500;
  border-radius: var(--radius-pill);
}

.badge-accent { background: rgba(124,92,255,0.25); color: var(--accent); }
.badge-success { background: rgba(34,197,94,0.25); color: var(--accent-2); }
.badge-warn { background: rgba(245,158,11,0.25); color: var(--warn); }
.badge-danger { background: rgba(239,68,68,0.25); color: var(--danger); }
.badge-muted { background: var(--card-2); color: var(--muted); }

/* Toasts */
.toast {
  position: fixed;
  bottom: var(--space-6);
  left: 50%;
  transform: translateX(-50%);
  padding: var(--space-3) var(--space-5);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  animation: toast-in var(--dur-2) var(--ease);
}

@keyframes toast-in {
  from { opacity: 0; transform: translateX(-50%) translateY(10px); }
  to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* Segmented control */
.segmented {
  display: inline-flex;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: var(--space-1);
  gap: 0;
}

.segmented button {
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-sm);
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--muted);
  transition: background var(--dur-1) var(--ease), color var(--dur-1) var(--ease);
}

.segmented button:hover {
  color: var(--text);
}

.segmented button[aria-pressed="true"] {
  background: var(--card-2);
  color: var(--text);
}

.segmented button:focus-visible {
  box-shadow: var(--focus);
}

/* Toggle */
.toggle-wrap {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.toggle {
  position: relative;
  width: 2.75rem;
  height: 1.5rem;
  background: var(--card-2);
  border: 1px solid var(--border);
  border-radius: var(--radius-pill);
  cursor: pointer;
  transition: background var(--dur-1) var(--ease);
}

.toggle::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 1.125rem;
  height: 1.125rem;
  background: var(--muted);
  border-radius: 50%;
  transition: transform var(--dur-1) var(--ease);
}

.toggle[aria-pressed="true"] {
  background: var(--accent);
  border-color: var(--accent);
}

.toggle[aria-pressed="true"]::after {
  background: #fff;
  transform: translateX(1.25rem);
}

.toggle:focus-visible {
  box-shadow: var(--focus);
}

/* Vote chips: single choice per slot; selected = filled + glow, unselected = outline */
.vote-chip {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  font-size: var(--text-sm);
  border: 2px solid var(--border);
  background: var(--card);
  color: var(--muted);
  cursor: pointer;
  transition: background var(--dur-1) var(--ease), border-color var(--dur-1) var(--ease), box-shadow var(--dur-1) var(--ease);
}
.vote-chip[data-vote="yes"] { border-color: var(--vote-yes); color: var(--vote-yes); }
.vote-chip[data-vote="maybe"] { border-color: var(--vote-maybe); color: var(--vote-maybe); }
.vote-chip[data-vote="no"] { border-color: var(--vote-no); color: var(--vote-no); }

.vote-chip.active[data-vote="yes"] { background: rgba(34,197,94,0.35); border-color: var(--vote-yes); color: var(--vote-yes); box-shadow: 0 0 0 3px rgba(34,197,94,0.25); font-weight: 600; }
.vote-chip.active[data-vote="maybe"] { background: rgba(245,158,11,0.35); border-color: var(--vote-maybe); color: var(--vote-maybe); box-shadow: 0 0 0 3px rgba(245,158,11,0.25); font-weight: 600; }
.vote-chip.active[data-vote="no"] { background: rgba(239,68,68,0.35); border-color: var(--vote-no); color: var(--vote-no); box-shadow: 0 0 0 3px rgba(239,68,68,0.25); font-weight: 600; }

.vote-chip:hover { opacity: 0.9; }
.vote-chip:focus-visible { box-shadow: var(--focus); }
.vote-chip.active:focus-visible { box-shadow: var(--focus); }
.vote-chip:disabled { cursor: not-allowed; opacity: 0.6; }

.vote-selected-label { font-size: var(--text-xs); color: var(--muted); margin-top: var(--space-1); margin-bottom: 0; }

/* Results matrix (tabular data) */
.results-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--text-sm);
}

.results-table th,
.results-table td {
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--border);
  text-align: left;
}

.results-table th {
  background: var(--card);
  font-weight: 600;
}

.results-table tr.best-slot {
  background: rgba(124,92,255,0.12);
}

.results-table .vote-cell {
  text-align: center;
}

/* Loading indicator */
.spinner {
  width: 1.25rem;
  height: 1.25rem;
  border: 2px solid var(--border);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.btn .spinner {
  margin-right: var(--space-2);
}

/* Helper text */
.helper {
  font-size: var(--text-sm);
  color: var(--muted);
  margin-top: var(--space-1);
  margin-bottom: 0;
}

.form-group {
  margin-bottom: var(--space-4);
}

.form-group:last-child {
  margin-bottom: 0;
}
